<!doctype html>
<html>
  <head>
    <title> 8085 Simulator </title>
    <script src="js/parser.js"></script>
    <script src="js/8085sim.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<style>
textarea {
  height: 50vh;
  width: 50%;
}
</style>
  </head>
  <body>
  <div class="container-fluid">
    <div class="row">
		8085 Simulator
    </div>
  	<div class="row">
      <textarea id="code" class="col-xs-12 col-md-6" onblur="parseInput()" onpaste="parseInput()" 
      		placeholder="Type your code here"></textarea>
      <textarea id="memory" class="col-xs-12 col-md-6" readonly placeholder="Output will be here"></textarea>
  	</div>
  </div>
</body>
<script>
var input = document.getElementById("code")
var output = document.getElementById("memory")
let memBaseAddress = 8000
let code, mem=""
function parseInput(){
	code = parse(input.value)
	let addr = memBaseAddress
	let out = "Line \t Address \t Hex Code\n"
	for(let c of code){
		out += `${c.lineNumber} \t\t ${addr} \t ${c.code}\n`
		addr += c.bytes
	}
	output.value = out
}
</script> 

</html>
